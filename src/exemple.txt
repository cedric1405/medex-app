[
  {"quantity": 1, "price": 1000},
  {"quantity": 5, "price": 4500},
  {"quantity": 10, "price": 8500}
]



--------------------------------------------

{
  "monday": {"open": "08:00", "close": "18:00"},
  "tuesday": {"open": "08:00", "close": "18:00"},
  "wednesday": {"open": "08:00", "close": "18:00"},
  "thursday": {"open": "08:00", "close": "18:00"},
  "friday": {"open": "08:00", "close": "18:00"},
  "saturday": {"open": "09:00", "close": "14:00"},
  "sunday": {"open": null, "close": null}
}


import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import Login from './pages/Login';
import PharmacyRegistration from './pages/PharmacyRegistration';
import DeliveryRegistration from './pages/DeliveryRegistration';
import Home from './pages/Home';
import PharmacyDashboard from './pages/PharmacyDashboard';
import DeliveryDashboard from './pages/DeliveryDashboard';
import AdminDashboard from './pages/AdminDashboard';
import ProtectedRoute from './components/ProtectedRoute';

function App() {
  return (
    <Router>
      <Routes>
        {/* Public Routes */}
        <Route path="/login" element={<Login />} />
        <Route path="/" element={<Home />} />
        
        {/* Pharmacy Registration - Protected */}
        <Route 
          path="/pharmacy-registration" 
          element={
            <ProtectedRoute requiredRole="pharmacist">
              <PharmacyRegistration />
            </ProtectedRoute>
          } 
        />
        
        {/* Delivery Registration - Protected */}
        <Route 
          path="/delivery-registration" 
          element={
            <ProtectedRoute requiredRole="delivery">
              <DeliveryRegistration />
            </ProtectedRoute>
          } 
        />
        
        {/* Pharmacy Dashboard - Requires Profile */}
        <Route 
          path="/dashboard" 
          element={
            <ProtectedRoute requiredRole="pharmacist" requiresProfile={true}>
              <PharmacyDashboard />
            </ProtectedRoute>
          } 
        />
        
        {/* Delivery Dashboard - Requires Profile */}
        <Route 
          path="/delivery" 
          element={
            <ProtectedRoute requiredRole="delivery" requiresProfile={true}>
              <DeliveryDashboard />
            </ProtectedRoute>
          } 
        />
        
        {/* Admin Dashboard */}
        <Route 
          path="/admin" 
          element={
            <ProtectedRoute requiredRole="admin">
              <AdminDashboard />
            </ProtectedRoute>
          } 
        />
      </Routes>
    </Router>
  );
}

export default App;



--------------------------------------------------------------------------------------------

from django.contrib.auth import authenticate, login, logout
from django.http import HttpResponseRedirect
from django.shortcuts import render, redirect
from django.contrib import messages
from .decorators import *
from django.core.mail import send_mail
from random import randint
from django.utils.timezone import now
from django.shortcuts import get_object_or_404
from .models import OTP
from django.utils import timezone
from datetime import timedelta

@unautheticated_user
def loginPage(request):
    if request.method == 'POST':
        username = request.POST.get('username')
        password = request.POST.get('password')

        # Authentifier l'utilisateur
        user = authenticate(request, username=username, password=password)
        if user:
            login(request, user)
            if user.is_superuser:  # Vérifier si l'utilisateur est un superuser
                # Générer un OTP unique
                otp_code = str(randint(100000, 999999))

                # Stocker ou mettre à jour l'OTP dans la base de données
                otp, created = OTP.objects.update_or_create(
                    user=user,
                    defaults={'otp_code': otp_code, 'created_at': now(), 'is_verified': False},
                )

                # Envoyer l'OTP par e-mail
                send_mail(
                    'Votre code OTP',
                    f'Bonjour {user.username}, votre code OTP est {otp_code}. Ce code est valide pendant 5 minutes.',
                    'secupharmacy@gmail.com',  # Remplacez par votre adresse e-mail
                    [user.email],
                    fail_silently=False,
                )

                # Stocker l'ID utilisateur dans la session
                request.session['otp_user_id'] = user.id
                print(f"Session après stockage de l'ID utilisateur: {request.session['otp_user_id']}")
                
                # Rediriger vers la page de vérification de l'OTP
                return redirect('verify_otp')

            # Si ce n'est pas un superuser, continuer le processus normal
            # login(request, user)
            return redirect('/')  # Redirection après une connexion réussie

        else:
            messages.error(request, "Identifiants de connexion invalides !")
            return redirect('login')  # Si l'utilisateur n'est pas trouvé, retourner à la page de login

    return render(request, 'login.html')


def verify_otp(request):
    print(f"Vérification de l'OTP - Session actuelle: {request.session.get('otp_user_id')}")

    # Si l'utilisateur n'est pas connecté ou l'ID de session est introuvable
    if not request.session.get('otp_user_id'):
        messages.error(request, "Session expirée. Veuillez vous reconnecter.")
        return redirect('login')

    # Récupérer l'OTP et l'utilisateur lié à la session
    user_id = request.session.get('otp_user_id')
    otp = get_object_or_404(OTP, user_id=user_id)

    if request.method == 'POST':
        otp_code = request.POST.get('otp_code')

        # Vérifier si l'OTP est valide et non expiré
        otp_expiration_time = otp.created_at + timedelta(minutes=5)  # 5 minutes de validité
        if otp.otp_code == otp_code and timezone.now() <= otp_expiration_time:
            # Marquer l'OTP comme vérifié
            otp.is_verified = True
            otp.save()

            # Connecter l'utilisateur
            user = otp.user
            login(request, user)
            messages.success(request, "Connexion réussie.")
            return redirect('/')  # Vous pouvez rediriger l'utilisateur vers la page d'accueil ou une autre page.

        else:
            messages.error(request, "Code OTP invalide ou expiré.")
            return redirect('verify_otp')

    return render(request, 'verify_otp.html')


def logoutUser(request):
    logout(request)
    return redirect('login')

    ---------------------------------------

    voici mon PharmacyDashoard.jsx voici mes models.py et views.py et serializers.py. je voudrais pouvoir gerer le dashboard du pharmacien de telle sorte que lorsqu'il est connect il aura acces a son dashboard. deja suer ce dashboard retire la page du stock management puis dans le product management je voudrais que ca affiche ses produuits qui sont deja sur la plateforme mais qu'il est la possibilit d'ajouter des produits qui seront directement redirigé vers la plateforme et un autre bouton importer qui lui permettra d'importer un fichier excel pour ajouter directement des plusiers produits
    ----------------------------------------------------------------
    from app.models import AppUser

admin = AppUser.objects.create_user(
    email='admedex09@gmail.com',
    password='Admin@123456',
    first_name='Admin',
    last_name='MedEx',
    role='admin',
    username='admin@medex',
    is_staff=True,
    is_superuser=True
)